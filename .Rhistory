library("devtools")
devtools::install_github("stattleship/stattleship-r")
library(stattleshipR)
set_token("bf3c65fd3952ea434f4a96b641744475")
sport <- 'baseball'
league <- 'mlb'
ep <- 'game_logs'
league.team <- paste(league, 'bos', sep = "-")
q_body <- list(team_id=league.team, status='upcoming', interval_type='regularseason')
gls <- ss_get_result(sport=sport, league=league, ep=ep, query=q_body, walk=TRUE)
gls
ep <- 'players'
q_body <- list(team_id = league.team)
pls <- ss_get_result(sport=sport, league=league, ep=ep, query=q_body, walk=TRUE)
players<-do.call('rbind', lapply(pls, function(x) x$players))
colnames(players)[1] <- 'player_id'
game_logs<-do.call('rbind', lapply(gls, function(x) x$game_logs))
game_logs <- merge(players, game_logs, by='player_id')
View(players)
read.csv("all2010.csv", header = FALSE)
read.csv("all2010.csv", header = FALSE)
a<-read.csv("all2010.csv", header = FALSE)
a<-read.csv("all2010.csv", header = FALSE)
f<-read.csv("all2015.csv", header = FALSE)
all2010 <- read.csv("~/Desktop/RE&WP/Final.RE/run-expectancy/all2010.csv", header=FALSE)
View(all2010)
a<- all2010
191835/2
halfa <- a[[1:95917]]
halfa <- a[[1:95917,]]
a[[1, ]]
a[1, ]
halfa <- a[1:95917,]
half2a <- a[95918:191835]
half2a <- a[95918:191835,]
all2011 <- read.csv("~/Desktop/RE&WP/Final.RE/run-expectancy/all2011.csv", header=FALSE)
View(all2011)
all2012 <- read.csv("~/Desktop/RE&WP/Final.RE/run-expectancy/all2012.csv", header=FALSE)
View(all2012)
all2013 <- read.csv("~/Desktop/Extras/all2013.csv", header=FALSE)
View(all2013)
all2014 <- read.csv("~/Desktop/RE&WP/Final.RE/run-expectancy/all2014.csv", header=FALSE)
View(all2014)
all2015 <- read.csv("~/Desktop/Extras/all2015.csv", header=FALSE)
View(all2015)
191864/2
190774/2
190907/2
189982/2
189591
189591/2
halfa <- a[1:95917,]
half2a <- a[95918:191835,]
halfb <- a[1:95932,]
half2b <- a[95933:191864,]
halfc <- a[1:95387,]
half2c <- a[95388:190774,]
halfd <- a[1:95453,]
half2d <- a[95454:190907,]
halfe <- a[1:94991,]
half2e <- a[94992:189982,]
halff <- a[1:94795,]
half2f <- a[94796:189591,]
write.csv(halfa)
write.csv(halfa, file="csvs", row.names = FALSE)
write.csv(halfa, file="csvs", row.names = FALSE)
write.csv(halfa, file="csvs", row.names = FALSE)
write.csv(halfa, file="csvs", row.names = FALSE)
write.csv(halfa, "2010A", row.names = FALSE)
write.csv(half2a,"2010B", row.names = FALSE)
write.csv(halfb,"2011A", row.names = FALSE)
write.csv(half2b,"2011B", row.names = FALSE)
write.csv(halfc,"2012A", row.names = FALSE)
write.csv(half2c,"2012B", row.names = FALSE)
write.csv(halfd,"2013A", row.names = FALSE)
write.csv(half2d,"2013B", row.names = FALSE)
write.csv(halfe,"2014A", row.names = FALSE)
write.csv(half2e,"2014B", row.names = FALSE)
write.csv(halff,"2015A", row.names = FALSE)
write.csv(half2f,"2015B", row.names = FALSE)
shiny::runApp('Desktop/RE&WP/Final.RE')
runApp('Desktop/RE&WP/Final.RE')
library("devtools")
devtools::install_github("stattleship/stattleship-r")
library(stattleshipR)
set_token("bf3c65fd3952ea434f4a96b641744475")
league <- "mlb"
sport <- "baseball"
ep <- "players"
q_body <- list()
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = TRUE)
set_token("bf3c65fd3952ea434f4a96b641744475")
league <- "mlb"
sport <- "baseball"
ep <- "players"
q_body <- list()
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = TRUE)
players_df <- do.call("rbind", lapply(players, function(x) x$players))
View(players_df)
players_df <- subset(player_df, player_df$active == TRUE)
players_df <- subset(player_dfs, players_df$active == TRUE)
players_df <- subset(players_df, players_df$active == TRUE)
players_df[c(5,12,13,17,18,19,25)]
players_df[c(5,12,13,17,18,19,25),]
players_df[,c(5,12,13,17,18,19,25)]
x<- players_df[,c(5,12,13,17,18,19,25)]
nrow(x)
players_df <- players_df[,c(5,12,13,17,18,19,25)]
write.csv(players_df, "player-info.csv")
set_token("bf3c65fd3952ea434f4a96b641744475")
league <- "mlb"
sport <- "baseball"
ep <- "players"
q_body <- list()
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = TRUE)
players_df <- do.call("rbind", lapply(players, function(x) x$players))
set_token("bf3c65fd3952ea434f4a96b641744475")
league <- "mlb"
sport <- "baseball"
ep <- "players"
q_body <- list()
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = TRUE)
players_df <- do.call("rbind", lapply(players, function(x) x$players))
batters <- read.csv("batters.csv")
getwd()
setwd("~/Desktop/run-expectancy")
batters <- read.csv("batters.csv")
View(batters)
batters$X <- NULL
dimnames(batters)[[2]] <- c("name", "position_abbreviation","team")
gsub("RP", "P", players_df$position_abbreviation)
players_df$position_abbreviation <- gsub("RP", "P", players_df$position_abbreviation)
players_df$position_abbreviation <- gsub("SP", "P", players_df$position_abbreviation)
x <- merge(players_df, batters, by = "name" & "position_abbreviation")
players_df$A <- paste(name, position_abbreviation, sep = " ")
players_df$A <- paste(players_df$name, players_df$position_abbreviation, sep = " ")
batters$A <- paste(batters$name, batters$position_abbreviation, sep = " ")
x <- merge(players_df, batters, by = 'A')
View(x)
x <- x[,c(6,13,14,18,19,20,21,26,38)]
write.csv(x, "player-info.csv")
library("devtools")
devtools::install_github("stattleship/stattleship-r")
library(stattleshipR)
set_token("bf3c65fd3952ea434f4a96b641744475")
league <- "mlb"
sport <- "baseball"
ep <- "players"
player_id <- "mlb-clayton-kershaw"
q_body <- list()
players <- ss_get_result(sport = sport, league = league, ep = ep, player_id = player_id,
query = q_body, version = 1, walk = TRUE)
players_df <- do.call("rbind", lapply(players, function(x) x$players))
player_id <- "mlb-clayton-kershaw"
q_body <- list(player_id = player_id)
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = TRUE)
players_df <- do.call("rbind", lapply(players, function(x) x$players))
player_id <- "mlb-clayton-kershaw"
q_body <- list(player_id = player_id, stat = "pitcher_hits")
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = TRUE)
players_df <- do.call("rbind", lapply(players, function(x) x$players))
ep <- "stats"
player_id <- "mlb-clayton-kershaw"
q_body <- list(player_id = player_id, stat = "pitcher_hits")
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = TRUE)
players_df <- do.call("rbind", lapply(players, function(x) x$players))
league <- "mlb"
sport <- "baseball"
ep <- "stats"
player_id <- "mlb-clayton-kershaw"
q_body <- list(player_id = player_id, stat = "pitcher_hits")
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = TRUE)
players
sport <- "baseball"
ep <- "stats"
player_id <- "mlb-clayton-kershaw"
q_body <- list(stat = "pitcher_hits")
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players
ep <- "stats"
player_id <- "mlb-clayton-kershaw"
q_body <- list(stat = "pitcher_hits", type = 'baseball_pitcher_stat')
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players
ep <- "stats"
player_id <- "mlb-clayton-kershaw"
q_body <- list(stat = "pitcher_hits", type = 'baseball_pichter_stat')
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players
library("devtools")
devtools::install_github("stattleship/stattleship-r")
library(stattleshipR)
set_token("bf3c65fd3952ea434f4a96b641744475")
league <- "mlb"
sport <- "baseball"
ep <- "stats"
player_id <- "mlb-clayton-kershaw"
q_body <- list(stat = "pitches_thrown", type = 'baseball_pitcher_stat')
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
library("devtools")
devtools::install_github("stattleship/stattleship-r")
library(stattleshipR)
set_token("bf3c65fd3952ea434f4a96b641744475")
league <- "mlb"
sport <- "baseball"
ep <- "stats"
player_id <- "mlb-clayton-kershaw"
q_body <- list(stat = "pitches_thrown", type = 'baseball_pitcher_stat')
ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
sport <- "baseball"
ep <- "stats"
player_id <- "mlb-clayton-kershaw"
q_body <- list(stat = "pitches_thrown", type = 'baseball_pichter_stat')
ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
player_id <- "mlb-clayton-kershaw"
q_body <- list(stat = "pitches_thrown", type = 'baseball_pitcher_stat', player_id = player_id)
ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players_df <- do.call("rbind", lapply(players, function(x) x$players))
player_id <- "mlb-clayton-kershaw"
q_body <- list(stat = "pitcher_hits", type = 'baseball_pitcher_stat', player_id = player_id)
players <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players
sum(players$stat_name)
players$stat_name
typeof(players)
players_df <- do.call("rbind", lapply(players, function(x) x$players))
players <- data.frame(ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE))
players[3]
players[[3]]
players
players$stat
players$stats
players[[1]]$stats
data.frame(players[[1]]$stats)
players_df <- data.frame(players[[1]]$stats)
sum(players_df$stat)
sum(players_df$stat, na.rm = TRUE)
pitcher.stats <- function(stat){
q_body <- list(stat = stat, type = 'baseball_pitcher_stat', player_id = player_id)
player <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players_df <- data.frame(players[[1]]$stats)
x <- sum(players_df$stat, na.rm = TRUE)
return(x)
}
stats <- list('pitcher_hit_by_pitcher','pitcher_hits','pitcher_intentional_walks','pitchers_sacrifice_flys','pitcher_sacrifice_hits','pitcher_walks','batters_faced')
test <- sapply(stats, pitcher.stats)
test
q_body <- list(stat = 'batters_faced', type = 'baseball_pitcher_stat', player_id = player_id)
player <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players_df <- data.frame(players[[1]]$stats)
x <- sum(players_df$stat, na.rm = TRUE)
x
q_body <- list(stat = 'pitcher_intentional_walks', type = 'baseball_pitcher_stat', player_id = player_id)
player <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players_df <- data.frame(players[[1]]$stats)
x <- sum(players_df$stat, na.rm = TRUE)
x
q_body <- list(stat = 'pitcher_intentional_walks', type = 'baseball_pitcher_stat', player_id = player_id)
player <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players_df <- data.frame(player[[1]]$stats)
x <- sum(players_df$stat, na.rm = TRUE)
x
pitcher.stats <- function(p.stat){
q_body <- list(stat = p.stat, type = 'baseball_pitcher_stat', player_id = player_id)
player <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players_df <- data.frame(player[[1]]$stats)
x <- sum(players_df$stat, na.rm = TRUE)
return(x)
}
test <- sapply(stats, pitcher.stats)
test
q_body <- list(stat = 'batting_average', type = 'baseball_pitcher_stat', player_id = 'mlb-clayton-kershaw')
player <- ss_get_result(sport = sport, league = league, ep = ep,
query = q_body, version = 1, walk = FALSE)
players_df <- data.frame(player[[1]]$stats)
x <- sum(players_df$stat, na.rm = TRUE)
x
